image:
  - Visual Studio 2019

build:
  parallel: true
  verbosity: detailed

configuration:
  - Debug
  - Release

environment:
  APPVEYOR_SAVE_CACHE_ON_ERROR:: true

  matrix:
    - platform: x64

cache:
  - C:\Tools\vcpkg\installed

install:
  - cd C:\Tools\vcpkg
  - git pull
  - .\bootstrap-vcpkg.bat
  - cd %appveyor_build_folder%
  - vcpkg install boost:%platform%-windows
  - vcpkg install fmt:%platform%-windows
  - vcpkg install gtest:%platform%-windows

build_script:
  - mkdir build
  - cd build
  - cmake -G "%generator" -DCMAKE_TOOLCHAIN_FILE=C:/Tools/vcpkg/scripts/buildsystems/vcpkg.cmake 
  - cmake --build . --config Release

test_script
  - ctest . -C Release
